## COMMENTS
##
## Contract 1 represents the state of the Door, 
## contract 2 represents the state of the Train
##
## Variable Definitions:
## train_enters - train entering the station
## train_exits - train exiting the station
## train_moving - train moving 
## train_in_station - if train is in station or not
## door_open - whether the door is open or not
## door_opening - door opening or closing

CONTRACT:
	NAME:
		door
	VARIABLES:
		door_opening := FALSE
		door_open := FALSE
		train_enters := TRUE
		train_exits := FALSE
		train_moving := TRUE
		train_in_station := FALSE
	ASSUMPTIONS:
		TRUE
	GUARANTEES:
		G(train_enters -> X door_opening)
		G(train_exits -> !door_open)
		G(train_moving -> !door_open)
		G(door_opening -> X door_open)
		G(door_open -> !door_opening)

CONTRACT:
	NAME:
		train
	VARIABLES:
		train_enters := TRUE
		train_exits := FALSE
		train_moving := TRUE
		train_in_station := FALSE
		door_opening := FALSE
		door_open := FALSE
	ASSUMPTIONS:
		TRUE
	GUARANTEES:
		G(train_enters -> train_moving)
		G(train_exits -> train_moving)
		G(door_opening -> !train_moving)
		G(door_open -> !train_moving)
		G(train_enters -> X train_in_station)
		G(train_exits -> X !train_in_station)
	
CHECKS:
	COMPATIBILITY_COMP(train, door)
	CONSISTENCY_COMP(train, door)